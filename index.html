<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Completion Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .task-list {
      margin-bottom: 20px;
    }
    .task-item {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
<h2>Task Completion Calculator</h2>
<label for="current-day">Current Day:</label>
<input type="text" id="current-day" onchange="saveCurrentDay()">
<div class="task-list">
  <h3>List A (Important Tasks)</h3>
  <ul id="list-a">
    <!-- Initial tasks can be added here -->
  </ul>
  <button onclick="addTask('a')">Add Task</button>
</div>

<div class="task-list">
  <h3>List B (Time-Wasting Activities)</h3>
  <ul id="list-b">
    <!-- Initial tasks can be added here -->
  </ul>
  <button onclick="addTask('b')">Add Task</button>
</div>

<div class="task-list">
  <h3>List C (Self-Care)</h3>
  <ul id="list-c">
    <!-- Initial tasks can be added here -->
  </ul>
  <button onclick="addTask('c')">Add Task</button>
</div>

<button onclick="calculateCompletion()">Calculate Completion Percentage</button>
<button onclick="resetTasks()">Reset All Tasks</button>
<div id="completionResult"></div>

<script>
  function addTask(list) {
    const listElement = document.getElementById(`list-${list}`);
    const taskCount = listElement.children.length + 1;
    const newTask = `<li class="task-item" id="task-${list}-${taskCount}">
                        <input type="checkbox" onchange="saveTasks()"> Task ${taskCount}
                        <input type="text" onchange="saveTasks()" placeholder="Task description">
                        <button onclick="removeTask('${list}', ${taskCount})">Remove</button>
                    </li>`;
    listElement.insertAdjacentHTML('beforeend', newTask);
    saveTasks(); // Save tasks to local storage after adding a new task
  }

  // Function to remove a task
  function removeTask(list, taskCount) {
    const taskElement = document.getElementById(`task-${list}-${taskCount}`);
    taskElement.remove();
    saveTasks(); // Save tasks to local storage after removing a task
  }



  function calculateCompletion() {
    // Initialize variables to count completed tasks and total tasks for each list
    let completedTasksA = 0;
    let totalTasksA = 0;
    let completedTasksB = 0;
    let totalTasksB = 0;
    let completedTasksC = 0;
    let totalTasksC = 0;

    // Count completed tasks and total tasks for List A
    for (let i = 1; ; i++) {
      const checkbox = document.getElementById(`task-a-${i}`);
      if (!checkbox) break; // Exit the loop if there are no more tasks
      totalTasksA++;
      if (checkbox.checked) {
        completedTasksA++;
      }
    }

    // Count completed tasks and total tasks for List B
    for (let i = 1; ; i++) {
      const checkbox = document.getElementById(`task-b-${i}`);
      if (!checkbox) break; // Exit the loop if there are no more tasks
      totalTasksB++;
      if (checkbox.checked) {
        completedTasksB++;
      }
    }

    // Count completed tasks and total tasks for List C
    for (let i = 1; ; i++) {
      const checkbox = document.getElementById(`task-c-${i}`);
      if (!checkbox) break; // Exit the loop if there are no more tasks
      totalTasksC++;
      if (checkbox.checked) {
        completedTasksC++;
      }
    }

    // Calculate completion percentages considering completed tasks and total tasks
    const completionA = (completedTasksA / totalTasksA) * 100 || 0;
    const completionB = (completedTasksB / totalTasksB) * 100 || 0;
    const completionC = (completedTasksC / totalTasksC) * 100 || 0;

    // Calculate weighted completion percentages
    const weightedCompletionA = completionA * 0.60;
    const weightedCompletionB = completionB * 0.25;
    const weightedCompletionC = completionC * 0.15;

    // Calculate overall completion percentage
    const overallCompletion = weightedCompletionA + weightedCompletionB + weightedCompletionC;

    // Display the result
    document.getElementById("completionResult").innerHTML = `Overall Completion Percentage: ${overallCompletion.toFixed(2)}%`;
  }

  function saveTasks() {
    const tasks = {
      listA: [],
      listB: [],
      listC: []
    };

    ['a', 'b', 'c'].forEach(list => {
      const listItems = document.querySelectorAll(`#list-${list} .task-item`);
      listItems.forEach(item => {
        const checkbox = item.querySelector('input[type="checkbox"]');
        const description = item.querySelector('input[type="text"]').value;
        tasks[`list${list.toUpperCase()}`].push({
          checked: checkbox.checked,
          description: description
        });
      });
    });

    localStorage.setItem('tasks', JSON.stringify(tasks));
  }

  function loadTasks() {
    const savedTasks = localStorage.getItem('tasks');
    if (savedTasks) {
      const tasks = JSON.parse(savedTasks);
      ['a', 'b', 'c'].forEach(list => {
        const listElement = document.getElementById(`list-${list}`);
        listElement.innerHTML = '';
        tasks[`list${list.toUpperCase()}`].forEach((task, index) => {
          const newTask = `<li class="task-item"><input type="checkbox" id="task-${list}-${index + 1}" onchange="saveTasks()" ${task.checked ? 'checked' : ''}> ${task.description}<input type="text" onchange="saveTasks()" value="${task.description}" placeholder="Task description"></li>`;
          listElement.insertAdjacentHTML('beforeend', newTask);
        });
      });
    }
  }

  // Load tasks when the DOM content is fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    loadTasks();
  });
  function resetTasks() {
    localStorage.removeItem('tasks'); // Remove saved tasks from local storage
    ['a', 'b', 'c'].forEach(list => {
      document.getElementById(`list-${list}`).innerHTML = ''; // Clear tasks from each list
    });
  }

  // Load tasks when the DOM content is fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    loadTasks();
  });
</script>
</body>
</html>
